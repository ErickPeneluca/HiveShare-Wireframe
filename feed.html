<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HiveShare - Feed</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <!-- App Principal -->
    <div id="app-screen">
      <!-- Navbar -->
      <nav class="navbar">
        <div class="nav-container">
          <div class="nav-left">
            <div class="nav-brand">üêù HiveShare</div>
            <div class="search-box">
              <input
                type="text"
                placeholder="Buscar posts, pessoas, tags..."
                id="search-input"
                onkeyup="handleSearch(event)"
              />
              <button
                class="search-btn"
                onclick="performSearch()"
                title="Buscar"
              >
                üîç
              </button>
              <button
                class="search-btn"
                onclick="clearSearch()"
                title="Limpar busca"
                style="background: transparent; color: var(--text-secondary)"
              >
                ‚úï
              </button>
            </div>
          </div>
          <div class="nav-right">
            <button class="icon-btn" title="Notifica√ß√µes">
              <span class="notification-badge">3</span>
              üîî
            </button>
            <button class="icon-btn" title="Mensagens">
              <span class="notification-badge">1</span>
              üí¨
            </button>
            <div class="user-menu" onclick="toggleUserMenu()">
              <div class="user-avatar" id="nav-avatar">U</div>
              <span id="nav-username">Usu√°rio</span>
              <div class="dropdown-menu" id="user-dropdown">
                <a href="#" onclick="showProfile()">Meu Perfil</a>
                <a href="#" onclick="showSettings()">Configura√ß√µes</a>
                <a href="#" onclick="logout()">Sair</a>
              </div>
            </div>
          </div>
        </div>
      </nav>

      <!-- Container Principal -->
      <div class="main-container">
        <!-- Sidebar Esquerda -->
        <aside class="sidebar-left">
          <div class="sidebar-section">
            <button class="sidebar-btn active" onclick="showFeed('all')">
              <span class="icon">üè†</span> In√≠cio
            </button>
            <button class="sidebar-btn" onclick="showFeed('following')">
              <span class="icon">üë•</span> Seguindo
            </button>
            <button class="sidebar-btn" onclick="showFeed('trending')">
              <span class="icon">üî•</span> Em Alta
            </button>
            <button class="sidebar-btn" onclick="showFeed('saved')">
              <span class="icon">üîñ</span> Salvos
            </button>
          </div>

          <div class="sidebar-section">
            <h4>Tags Populares</h4>
            <div class="tag-list" id="popular-tags">
              <a href="#" class="tag-link" onclick="filterByTag('tecnologia')"
                >#tecnologia</a
              >
              <a href="#" class="tag-link" onclick="filterByTag('design')"
                >#design</a
              >
              <a href="#" class="tag-link" onclick="filterByTag('programacao')"
                >#programacao</a
              >
              <a href="#" class="tag-link" onclick="filterByTag('ia')">#ia</a>
              <a href="#" class="tag-link" onclick="filterByTag('startup')"
                >#startup</a
              >
            </div>
          </div>
        </aside>

        <!-- Feed Central -->
        <main class="feed-container">
          <!-- Criar Post -->
          <div class="create-post-box">
            <div class="create-post-header">
              <div class="user-avatar small" id="create-avatar">U</div>
              <input
                type="text"
                placeholder="O que voc√™ est√° pensando?"
                onclick="openCreatePostModal()"
                readonly
              />
            </div>
            <div class="create-post-actions">
              <button class="post-action-btn" onclick="openCreatePostModal()">
                üì∑ Foto
              </button>
              <button class="post-action-btn" onclick="openCreatePostModal()">
                üé• V√≠deo
              </button>
              <button class="post-action-btn" onclick="openCreatePostModal()">
                üè∑Ô∏è Tag
              </button>
            </div>
          </div>

          <!-- Feed de Posts -->
          <div id="posts-feed" class="posts-feed">
            <!-- Posts ser√£o inseridos aqui via JavaScript -->
          </div>

          <!-- Loading -->
          <div class="feed-loading" id="feed-loading" style="display: none">
            <div class="spinner"></div>
            <p>Carregando mais posts...</p>
          </div>

          <!-- Fim do Feed -->
          <div class="feed-end" id="feed-end" style="display: none">
            <p>Voc√™ viu todos os posts recentes! üéâ</p>
          </div>
        </main>

        <!-- Sidebar Direita -->
        <aside class="sidebar-right">
          <div class="widget">
            <h4>Sugest√µes para Seguir</h4>
            <div id="suggestions-list" class="suggestions-list">
              <!-- Sugest√µes ser√£o inseridas aqui -->
            </div>
          </div>

          <div class="widget">
            <h4>Trending Today</h4>
            <div class="trending-list">
              <div class="trending-item">
                <div class="trending-rank">1</div>
                <div class="trending-info">
                  <div class="trending-tag">#IA</div>
                  <div class="trending-count">1.2K posts</div>
                </div>
              </div>
              <div class="trending-item">
                <div class="trending-rank">2</div>
                <div class="trending-info">
                  <div class="trending-tag">#WebDev</div>
                  <div class="trending-count">856 posts</div>
                </div>
              </div>
              <div class="trending-item">
                <div class="trending-rank">3</div>
                <div class="trending-info">
                  <div class="trending-tag">#Design</div>
                  <div class="trending-count">643 posts</div>
                </div>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </div>

    <!-- Modal: Criar Post -->
    <div id="create-post-modal" class="modal">
      <div class="modal-content large">
        <div class="modal-header">
          <h3>Criar Post</h3>
          <button class="close-btn" onclick="closeModal('create-post-modal')">
            &times;
          </button>
        </div>
        <form onsubmit="handleCreatePost(event)">
          <div class="post-creator">
            <div class="user-info-line">
              <div class="user-avatar small" id="modal-avatar">U</div>
              <span id="modal-username">Usu√°rio</span>
            </div>
            <textarea
              id="post-content"
              placeholder="Compartilhe algo interessante..."
              rows="6"
              maxlength="3000"
            ></textarea>
            <div class="char-counter">
              <span id="char-count">0</span> / 3000
            </div>

            <div class="media-preview" id="media-preview"></div>

            <div class="form-group">
              <input
                type="text"
                id="post-tags"
                placeholder="Adicione tags (separe por v√≠rgula)"
              />
              <small>Ex: tecnologia, programa√ß√£o, tutorial</small>
            </div>

            <div class="ai-optimize-section">
              <button
                type="button"
                class="btn-ai-optimize"
                title="Otimizar seu post com IA"
              >
                <span class="ai-icon">‚ú®</span>
                <span class="ai-text">Otimizar com IA</span>
                <span class="ai-shimmer"></span>
              </button>
            </div>
          </div>

          <div class="modal-actions">
            <div class="post-options">
              <button
                type="button"
                class="icon-btn"
                onclick="document.getElementById('image-upload').click()"
                title="Adicionar foto"
              >
                üì∑
              </button>
              <button
                type="button"
                class="icon-btn"
                onclick="document.getElementById('video-upload').click()"
                title="Adicionar v√≠deo"
              >
                üé•
              </button>
              <button
                type="button"
                class="icon-btn"
                onclick="openEmojiPicker()"
                title="Adicionar emoji"
              >
                üòÄ
              </button>
            </div>
            <button type="submit" class="btn btn-primary">Publicar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal: Visualizar Post Completo -->
    <div id="view-post-modal" class="modal">
      <div class="modal-content large">
        <div class="modal-header">
          <h3>Post</h3>
          <button class="close-btn" onclick="closeModal('view-post-modal')">
            &times;
          </button>
        </div>
        <div id="post-details">
          <!-- Detalhes do post ser√£o inseridos aqui -->
        </div>
      </div>
    </div>

    <!-- Modal: Coment√°rios -->
    <div id="comments-modal" class="modal">
      <div class="modal-content large">
        <div class="modal-header">
          <h3>Coment√°rios</h3>
          <button class="close-btn" onclick="closeModal('comments-modal')">
            &times;
          </button>
        </div>
        <div id="comments-content">
          <!-- Post original -->
          <div id="original-post"></div>

          <!-- Lista de coment√°rios -->
          <div id="comments-list"></div>

          <!-- Adicionar coment√°rio -->
          <div class="add-comment-box">
            <div class="user-avatar small" id="comment-avatar">U</div>
            <textarea
              id="comment-input"
              placeholder="Escreva um coment√°rio..."
              rows="2"
              maxlength="500"
            ></textarea>
          </div>
          <div class="comment-actions">
            <span class="comment-char-count"
              ><span id="comment-char-count">0</span> / 500</span
            >
            <button class="btn btn-primary" onclick="addComment()">
              Comentar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Seletor de Emoji -->
    <div id="emoji-picker" class="emoji-picker" style="display: none">
      <div class="emoji-picker-header">
        <span>Emojis</span>
        <button class="close-btn" onclick="closeEmojiPicker()">&times;</button>
      </div>
      <div class="emoji-grid" id="emoji-grid"></div>
    </div>

    <!-- Input de arquivo (oculto) -->
    <input
      type="file"
      id="image-upload"
      accept="image/*"
      style="display: none"
      onchange="handleImageUpload(event)"
    />
    <input
      type="file"
      id="video-upload"
      accept="video/*"
      style="display: none"
      onchange="handleVideoUpload(event)"
    />

    <!-- Modal: Perfil do Usu√°rio -->
    <div id="profile-modal" class="modal">
      <div class="modal-content large">
        <div class="modal-header">
          <h3>Meu Perfil</h3>
          <button class="close-btn" onclick="closeModal('profile-modal')">
            &times;
          </button>
        </div>
        <div id="profile-content">
          <!-- Conte√∫do do perfil ser√° inserido aqui -->
        </div>
      </div>
    </div>

    <script src="js/feed.js"></script>
  </body>
</html>
